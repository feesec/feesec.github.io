import{c as v,e as w,r as i,j as e,L as P}from"./index-C6lTiA6Z.js";import{B as L}from"./badge-CLxhghwT.js";import{u as S,P as k}from"./usePagination-BEqWlHwN.js";import{a as C}from"./posts-OIA5vU-B.js";import{X as E}from"./x-_4HCBEGh.js";import"./chevron-right-Ct2pFrdj.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],A=v("search",_),M=10;function $(){const[m,o]=w(),[d,n]=i.useState(""),[s,a]=i.useState(""),u=(t,r)=>{if(!r.trim())return t;const c=new RegExp(`(${r})`,"gi");return t.replace(c,'<mark class="bg-yellow-200 dark:bg-yellow-800 px-1 rounded">$1</mark>')},l=s.trim()?C.filter(t=>{const r=s.toLowerCase(),c=t.title?.toLowerCase().includes(r)||!1,y=Array.isArray(t.tags)?t.tags.some(N=>N?.toLowerCase().includes(r)):!1,j=t.content?.toLowerCase().includes(r)||!1,b=t.summary?.toLowerCase().includes(r)||!1;return c||y||j||b}):[],x=S({items:l,itemsPerPage:M,useUrlParams:!1}),g=()=>{n(""),a(""),o({})},h=t=>{t.key==="Enter"&&t.preventDefault()};i.useEffect(()=>{const t=m.get("q")||"";n(t),a(t)},[m]);const p=l.length>0,f=s.trim();return e.jsxs("main",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-12",children:e.jsx("div",{className:"max-w-lg mx-auto",children:e.jsxs("div",{className:"relative group",children:[e.jsx(A,{className:"absolute left-0 top-2.5 h-4 w-4 text-muted-foreground transition-colors group-focus-within:text-primary"}),e.jsx("input",{type:"text",placeholder:"搜索文章...",value:d,onChange:t=>{n(t.target.value);const r=t.target.value.trim();r?(a(r),o({q:r})):(a(""),o({}))},onKeyDown:h,className:"w-full py-2 pl-6 pr-6 bg-transparent border-0 border-b-2 border-border focus:outline-none focus:border-primary transition-colors text-sm placeholder:text-muted-foreground",autoFocus:!0}),d&&e.jsx("button",{onClick:g,className:"absolute right-0 top-2.5 text-muted-foreground hover:text-foreground transition-colors",children:e.jsx(E,{className:"h-3 w-3"})})]})})}),f?e.jsxs("div",{children:[e.jsx("div",{className:"mb-6 text-center",children:e.jsxs("p",{className:"text-muted-foreground text-sm",children:['搜索 "',e.jsx("span",{className:"font-medium text-foreground",children:s}),'" 找到 ',l.length," 篇文章"]})}),p?e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"space-y-2 mb-8",children:x.currentItems.map(t=>e.jsx(P,{to:`/post/${t.slug}`,state:{from:"search",query:s},className:"block group py-3 px-4 -mx-4 rounded-lg hover:bg-muted/30 transition-all duration-200",children:e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsx("time",{className:"text-muted-foreground font-mono tracking-wide min-w-[80px] text-xs",children:new Date(t.date).toLocaleDateString("zh-CN",{month:"2-digit",day:"2-digit"})}),e.jsx("h2",{className:"text-foreground font-medium flex-1 group-hover:text-primary transition-colors relative font-heading",children:e.jsx("span",{className:"group-hover:border-b-2 group-hover:border-primary/50 pb-0.5 transition-all duration-200",dangerouslySetInnerHTML:{__html:u(t.title,s)}})}),Array.isArray(t.tags)&&t.tags.length>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[t.tags.slice(0,2).map(r=>e.jsx(L,{variant:"outline",className:"text-xs px-2 py-0.5 h-auto border-muted-foreground/30 text-muted-foreground",dangerouslySetInnerHTML:{__html:u(r,s)}},r)),t.tags.length>2&&e.jsxs("span",{className:"text-muted-foreground text-xs",children:["+",t.tags.length-2]})]})]})},t.slug))}),e.jsx(k,{...x})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"没有找到相关文章"}),e.jsx("button",{onClick:g,className:"text-muted-foreground hover:text-primary transition-colors text-sm group",children:e.jsx("span",{className:"group-hover:border-b-2 group-hover:border-primary/50 pb-0.5 transition-all duration-200",children:"清空搜索"})})]})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-muted-foreground",children:"输入关键词搜索文章"})})]})}export{$ as default};
